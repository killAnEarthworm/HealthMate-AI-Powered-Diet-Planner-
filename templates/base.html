<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}My App{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-icons/font/bootstrap-icons.css') }}">
<style>
    body{
        background-color: #f8f9fa;
    }
    /* 顶部栏样式 */
    .top-bar {
      height: 50px;
      background-color: #fff;
      box-shadow: 0px 3px 3px rgba(0, 0, 0, 0.03);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 30px;
    }
    .top-bar .left-content {
      margin-left: 25px;
    }

    /* 左侧导航栏样式 */
    .left-nav {
      background-color: #f8f9fa;
      padding: 22px;
      height: 100vh;
      max-width:20%
    }

    .nav-item {
      margin: 10px 0;
      text-align: start;
        font-size: large;
    }

    /* 右侧主体内容样式 */
    .main-content {
      min-width: 80%;
      background-color: var(--Light-Grey, #FBFBFB);
      height: 100%;
      margin-left: auto;
    }

    .navbar-brand{
        color: var(--Black_S, #0C0B0B);
        font-family: "DM Sans";
        font-size: 18px;
        font-style: normal;
        font-weight: 500;
        line-height: normal;
    }
    .image {
      width: 33.151px;
      height: 32px;
      flex-shrink: 0;
      margin-left: 21px;
      background: url("static/images/lengzhu.png") lightgray 50% / cover no-repeat;
    }
    /* 子菜单右侧展开 */
    .dropdown-menu {
        width: 100%;
    }

    /* 当鼠标悬停时显示子菜单 */
    .nav-item:hover .dropdown-menu {
      display: block;
    }

    /* 修改导航按钮的默认背景色和文本颜色 */
    .left-nav .nav-link {
        color: #000000; /* 设置文本颜色 */
        font-size: 16px;
        border-radius: 4px;
    }

    /* 鼠标悬停时的背景色和文本颜色 */
    .left-nav .nav-link:hover {
        background-color: #E9FAF4; /* 设置悬停时背景色 */
        color: #004d40; /* 设置悬停时文本颜色 */
    }

    /* 激活状态时的背景色和文本颜色 */
    .left-nav .nav-link.active {
        background-color: var(--light-green, #22CB8E); /* 激活状态背景色 */
        color: var(--white_S); /* 激活状态文本颜色 */
    }

  </style>
</head>
<body>

  <!-- 顶部栏 -->
  <div class="top-bar">
    <div class="left-content">
      <!-- 顶部栏左侧内容 -->
      <span class="navbar-brand">糖尿病健康管理助手</span>
    </div>
    <div class="right-content">
      <!-- 顶部栏右侧内容 -->
      <i class="bi bi-heart-pulse"></i>
      <span class="navbar-brand">Healthoney</span>
      <img src="{{ url_for('static', filename='images/lengzhu.png') }}" alt="图像" class="image">
    </div>
  </div>

  <div class="container-fluid">
    <div class="row">
      <!-- 左侧导航栏 -->
      <div class="col left-nav">
        <ul class="nav flex-column nav-pills">
          <li class="nav-item">
            <a class="nav-link {% if request.path == '/data_board' %}active{% endif %}" href="{{ url_for('data_board_personal_center.data_board') }}">
              <i class="bi bi-bar-chart-line"></i> 数据看板
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link {% if request.path == '/health_report' %}active{% endif %}" href="{{ url_for('health_report_weight_prediction.health_report') }}" >
              <i class="bi bi-journal-medical"></i> 健康分析报告
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link {% if request.path == '/weight_prediction' %}active{% endif %}" href="{{ url_for('health_report_weight_prediction.weight_prediction') }}">
              <i class="bi bi-graph-up"></i> 体重趋势预测
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link {% if request.path == '/generate_plan' %}active{% endif %}" href="{{ url_for('generate_plan.generate_plan') }}">
              <i class="bi bi-pencil-square"></i> 生成计划
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link {% if request.path == '/nutrition_storage' %}active{% endif %}" href="{{ url_for('nutrition_storage_login.nutrition_storage') }}">
              <i class="bi bi-table"></i> 食物营养成分库
            </a>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle {% if 'personal_center' in request.path %}active{% endif %}" href="#" role="button">
              <i class="bi bi-house-gear"></i> 个人中心
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{{ url_for('data_board_personal_center.user_profile') }}">用户档案</a></li>
              <li><a class="dropdown-item" href="{{ url_for('data_board_personal_center.change_password') }}">修改密码</a></li>
              <li><a class="dropdown-item" href="#" onclick="confirmLogout()">退出登录</a></li>
            </ul>
          </li>
        </ul>
      </div>

      <!-- 右侧主体部分 -->
      <div class="col-auto main-content">
        {% block content %}<!-- 主体内容 -->{% endblock %}
      </div>
    </div>
  </div>

    <!-- 自定义弹窗 -->
<div id="logoutModal" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document"> <!-- 添加 centered 类 -->
    <div class="modal-content">
      <div class="modal-header  justify-content-center">
        <h5 class="modal-title" style="font-family: 'Roboto'; font-weight: 800; font-size: 20px;">是否退出登录</h5>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" id="cancelButton">取消</button>
        <button type="button" class="btn btn-success" id="confirmLogout">确定</button>
      </div>
    </div>
  </div>
</div>



  <!-- Bootstrap JS -->
  <script src="{{ url_for('static', filename='bootstrap/js/bootstrap.bundle.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script>
    function confirmLogout() {
      $('#logoutModal').modal('show');  // 显示自定义弹窗
    }

    document.getElementById('cancelButton').addEventListener('click', function() {
      $('#logoutModal').modal('hide'); // 关闭弹窗
    });

    document.getElementById('confirmLogout').addEventListener('click', function() {
      window.location.href = "{{ url_for('nutrition_storage_login.logout') }}";  // 跳转到退出登录路由
    });
  </script>

</body>
<style>
.modal-content {
  border-radius: 10px;  /* 弹窗圆角 */
}

.modal-footer .btn {
  border-radius: 4px;   /* 按钮圆角 */
  font-family: 'Roboto'; /* 按钮字体 */
  font-size: 16px;       /* 按钮字体大小 */
  font-weight: 400;      /* 按钮字体粗细 */
  width: 120px;
}

#cancelButton {
  border: 2px solid #198754;  /* 取消按钮边框颜色 */
  background-color: white;     /* 取消按钮背景色 */
  color: #198754;               /* 取消按钮字体颜色 */
}

#cancelButton:hover {
  background-color: #E9FAF4;   /* 悬停效果 */
}

#confirmLogout {
  border: 2px solid #198754;   /* 确定按钮边框颜色 */
  background-color: #198754;   /* 确定按钮背景色 */
  color: white;                 /* 确定按钮字体颜色 */
}
.modal-footer {
  gap: 150px; /* 设置按钮之间的距离，可以根据需要调整 */
  display: flex;
  justify-content: center;
}


</style>
</html>